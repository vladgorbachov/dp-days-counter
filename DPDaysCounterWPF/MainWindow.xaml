<Window x:Class="DPDaysCounterWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DP Hours Counter"
        Height="900" Width="1200"
        Style="{DynamicResource WindowStyle}"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource BackgroundBrush}"
        ResizeMode="NoResize">
    
    <Window.Resources>
        <!-- Анимация показа боковой панели -->
        <Storyboard x:Key="ShowSidebar">
            <DoubleAnimation Storyboard.TargetName="SidebarTransform"
                            Storyboard.TargetProperty="X"
                            To="0"
                            Duration="0:0:0.1">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        
        <!-- Анимация скрытия боковой панели -->
        <Storyboard x:Key="HideSidebar">
            <DoubleAnimation Storyboard.TargetName="SidebarTransform"
                            Storyboard.TargetProperty="X"
                            To="-250"
                            Duration="0:0:0.1">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Window.Resources>

    
    <Grid>
        <!-- Viewbox отключен -->
        <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
        
        <!-- Title Bar с glassmorphism эффектом -->
        <Border Grid.Row="0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="#F2141414" Offset="0"/>
                    <GradientStop Color="#F2282828" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="2" Color="Black" Opacity="0.2"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0,0,0">
                    <Image Source="Assets/logo.ico" Width="32" Height="32" Margin="0,0,12,0"/>
                                         <TextBlock Text="DP HOURS COUNTER" 
                              FontWeight="SemiBold" 
                              FontSize="20"
                              Foreground="{DynamicResource TextPrimaryBrush}"
                              VerticalAlignment="Center"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,10,0">
                    <Button x:Name="MinimizeButton" Content="🗕" Style="{DynamicResource TitleBarButtonStyle}" Click="MinimizeButton_Click"/>
                    <Button x:Name="MaximizeButton" Content="🗖" Style="{DynamicResource TitleBarButtonStyle}" Click="MaximizeButton_Click" Visibility="Hidden" IsEnabled="False"/>
                    <Button x:Name="CloseButton" Content="✕" Style="{DynamicResource CloseButtonStyle}" Click="CloseButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Main Content -->
        <Grid Grid.Row="1">
            <!-- Canvas для overlay эффекта -->
            <Canvas ZIndex="0">
                <!-- Триггерная область для показа боковой панели -->
                <Rectangle x:Name="SidebarTriggerArea" 
                          Width="20" 
                          Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Canvas}}"
                          Fill="Transparent"
                          HorizontalAlignment="Left"
                          MouseEnter="SidebarTriggerArea_MouseEnter"
                          MouseLeave="SidebarTriggerArea_MouseLeave"
                          Canvas.Left="0"
                          Canvas.Top="0"
                          Panel.ZIndex="1000"/>
            </Canvas>
            
            <!-- Calendar Area (основной контент) -->
            <Grid Margin="0">
                <!-- Calendar Container с glassmorphism -->
                <Border CornerRadius="12" Padding="0" Background="{DynamicResource CardBrush}" Margin="30">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="30" ShadowDepth="10" Color="Black" Opacity="0.2"/>
                    </Border.Effect>
                    
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Calendar Header -->
                        <Border Grid.Row="0" CornerRadius="12,12,0,0">
                            <Border.Background>
                                <DynamicResource ResourceKey="HeaderBackgroundBrush"/>
                            </Border.Background>
                            <Grid Margin="30" Height="80">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <Button x:Name="PrevMonthButton" 
                                       Content="‹" 
                                       Style="{DynamicResource ModernButtonStyle}"
                                       Width="40" Height="40"
                                       FontSize="24"
                                       Click="PrevMonthButton_Click"/>
                                
                                                                 <TextBlock x:Name="CurrentMonthText" 
                                          Grid.Column="1"
                                          Text="January 2024" 
                                          FontSize="28" 
                                          FontWeight="Bold"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Foreground="{DynamicResource TextPrimaryBrush}"/>
                                
                                <Button x:Name="NextMonthButton" 
                                       Grid.Column="2"
                                       Content="›" 
                                       Style="{DynamicResource ModernButtonStyle}"
                                       Width="40" Height="40"
                                       FontSize="24"
                                       Click="NextMonthButton_Click"/>
                            </Grid>
                        </Border>
                        
                        <!-- Weekdays Header -->
                        <Border Grid.Row="1">
                            <Border.Background>
                                <DynamicResource ResourceKey="HeaderBackgroundBrush"/>
                            </Border.Background>
                            <Grid Margin="15,15,15,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                                                 <TextBlock Grid.Column="0" Text="Sun" HorizontalAlignment="Center" FontWeight="Medium" FontSize="18" Foreground="{DynamicResource TextSecondaryBrush}"/>
                                 <TextBlock Grid.Column="1" Text="Mon" HorizontalAlignment="Center" FontWeight="Medium" FontSize="18" Foreground="{DynamicResource TextSecondaryBrush}"/>
                                 <TextBlock Grid.Column="2" Text="Tue" HorizontalAlignment="Center" FontWeight="Medium" FontSize="18" Foreground="{DynamicResource TextSecondaryBrush}"/>
                                 <TextBlock Grid.Column="3" Text="Wed" HorizontalAlignment="Center" FontWeight="Medium" FontSize="18" Foreground="{DynamicResource TextSecondaryBrush}"/>
                                 <TextBlock Grid.Column="4" Text="Thu" HorizontalAlignment="Center" FontWeight="Medium" FontSize="18" Foreground="{DynamicResource TextSecondaryBrush}"/>
                                 <TextBlock Grid.Column="5" Text="Fri" HorizontalAlignment="Center" FontWeight="Medium" FontSize="18" Foreground="{DynamicResource TextSecondaryBrush}"/>
                                 <TextBlock Grid.Column="6" Text="Sat" HorizontalAlignment="Center" FontWeight="Medium" FontSize="18" Foreground="{DynamicResource TextSecondaryBrush}"/>
                            </Grid>
                        </Border>
                        
                        <!-- Calendar Grid -->
                        <UniformGrid x:Name="CalendarGrid" 
                                    Grid.Row="2" 
                                    Rows="5" 
                                    Columns="7"
                                    Margin="20,20,20,20"/>
                        
                        <!-- Statistics Footer -->
                        <Border Grid.Row="3" Margin="20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Border Grid.Column="0" CornerRadius="8" Margin="8" Padding="8,15">
                                    <Border.Background>
                                        <DynamicResource ResourceKey="StatsBackgroundBrush"/>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="8" ShadowDepth="2" Color="Black" Opacity="0.2"/>
                                    </Border.Effect>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="Month Hours" 
                                                 FontSize="16" 
                                                 Foreground="{DynamicResource StatsTextBrush}"
                                                 HorizontalAlignment="Center"
                                                 Margin="0,0,0,5"/>
                                        <TextBlock x:Name="MonthHoursText" 
                                                 Text="0" 
                                                 FontSize="24" 
                                                 FontWeight="SemiBold"
                                                 HorizontalAlignment="Center"
                                                 Foreground="{DynamicResource StatsTextBrush}"/>
                                    </StackPanel>
                                </Border>
                                
                                <Border Grid.Column="1" CornerRadius="8" Margin="8" Padding="8,15">
                                    <Border.Background>
                                        <DynamicResource ResourceKey="StatsBackgroundBrush"/>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="8" ShadowDepth="2" Color="Black" Opacity="0.2"/>
                                    </Border.Effect>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="Month Days" 
                                                 FontSize="16" 
                                                 Foreground="{DynamicResource StatsTextBrush}"
                                                 HorizontalAlignment="Center"
                                                 Margin="0,0,0,5"/>
                                        <TextBlock x:Name="MonthDaysText" 
                                                 Text="0" 
                                                 FontSize="24" 
                                                 FontWeight="SemiBold"
                                                 HorizontalAlignment="Center"
                                                 Foreground="{DynamicResource StatsTextBrush}"/>
                                    </StackPanel>
                                </Border>
                                
                                <Border Grid.Column="2" CornerRadius="8" Margin="8" Padding="8,15">
                                    <Border.Background>
                                        <DynamicResource ResourceKey="StatsBackgroundBrush"/>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="8" ShadowDepth="2" Color="Black" Opacity="0.2"/>
                                    </Border.Effect>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="Selected Hours" 
                                                 FontSize="16" 
                                                 Foreground="{DynamicResource StatsTextBrush}"
                                                 HorizontalAlignment="Center"
                                                 Margin="0,0,0,5"/>
                                        <TextBlock x:Name="SelectedHoursText" 
                                                 Text="0" 
                                                 FontSize="24" 
                                                 FontWeight="SemiBold"
                                                 HorizontalAlignment="Center"
                                                 Foreground="{DynamicResource StatsTextBrush}"/>
                                    </StackPanel>
                                </Border>
                                
                                <Border Grid.Column="3" CornerRadius="8" Margin="8" Padding="8,15">
                                    <Border.Background>
                                        <DynamicResource ResourceKey="StatsBackgroundBrush"/>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="8" ShadowDepth="2" Color="Black" Opacity="0.2"/>
                                    </Border.Effect>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="Selected Days" 
                                                 FontSize="16" 
                                                 Foreground="{DynamicResource StatsTextBrush}"
                                                 HorizontalAlignment="Center"
                                                 Margin="0,0,0,5"/>
                                        <TextBlock x:Name="SelectedDaysText" 
                                                 Text="0" 
                                                 FontSize="24" 
                                                 FontWeight="SemiBold"
                                                 HorizontalAlignment="Center"
                                                 Foreground="{DynamicResource StatsTextBrush}"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </Border>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Grid>
    
    <!-- Выезжающая боковая панель -->
    <Border x:Name="Sidebar" 
            Width="250" 
            HorizontalAlignment="Left"
            VerticalAlignment="Stretch"
            Margin="0,50,0,0"
            Background="{DynamicResource SurfaceBrush}"
            Panel.ZIndex="100"
            MouseEnter="Sidebar_MouseEnter"
            MouseLeave="Sidebar_MouseLeave">
        <Border.RenderTransform>
            <TranslateTransform x:Name="SidebarTransform" X="-250"/>
        </Border.RenderTransform>
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="5" Direction="0" Color="Black" Opacity="0.3"/>
        </Border.Effect>
        <Grid>
            <StackPanel Margin="20">
                <TextBlock Text="Settings" 
                         FontSize="20" 
                         FontWeight="Medium"
                         Margin="0,0,0,20"
                         Foreground="{DynamicResource TextPrimaryBrush}"/>
                
                <TextBlock Text="Theme" 
                         FontSize="18" 
                         FontWeight="Medium"
                         Margin="0,0,0,15"
                         Foreground="{DynamicResource TextSecondaryBrush}"/>
                
                <Grid Margin="0,0,0,25">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Button x:Name="LightThemeButton" 
                           Grid.Column="0"
                           Content="Light" 
                           Style="{DynamicResource ThemeButtonStyle}"
                           Margin="0,0,3,0"
                           Click="LightThemeButton_Click"/>
                    <Button x:Name="DarkThemeButton" 
                           Grid.Column="1"
                           Content="Dark" 
                           Style="{DynamicResource ThemeButtonStyle}"
                           Margin="3,0,0,0"
                           Click="DarkThemeButton_Click"/>
                </Grid>
                
                <TextBlock Text="Updates" 
                         FontSize="18" 
                         FontWeight="Medium"
                         Margin="0,0,0,15"
                         Foreground="{DynamicResource TextSecondaryBrush}"/>
                
                <Button x:Name="CheckUpdatesButton" 
                       Content="Check for Updates" 
                       Style="{DynamicResource ModernButtonStyle}"
                       Click="CheckUpdatesButton_Click"/>
            </StackPanel>
        </Grid>
    </Border>
</Grid>
</Window> 